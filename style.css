/* ============================================================
   Rick's Driving Academy — Style System
   ============================================================ */

:root {
  --bg: #0a0e1a;
  --panel: #1a2035;
  --panel-light: #222d45;
  --green: #39FF14;
  --green-dim: rgba(57, 255, 20, 0.15);
  --orange: #FF4500;
  --orange-dim: rgba(255, 69, 0, 0.15);
  --gold: #FFD700;
  --gold-dim: rgba(255, 215, 0, 0.15);
  --text: #f0f0f0;
  --muted: #8899aa;
  --border: #2a3550;
  --border-light: #3a4560;
  --radius: 12px;
  --radius-sm: 8px;
}

/* ============================================================
   Base
   ============================================================ */

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  font-size: 16px;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
}

/* ============================================================
   Screen System
   ============================================================ */

.screen {
  position: fixed;
  inset: 0;
  display: none;
  flex-direction: column;
  overflow-y: auto;
  background: var(--bg);
}

.screen.active {
  display: flex;
}

/* ============================================================
   Splash Screen
   ============================================================ */

#screen-splash {
  align-items: center;
  justify-content: center;
}

.splash-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 32px 24px;
  width: 100%;
  max-width: 400px;
}

.app-title {
  text-align: center;
  line-height: 1.1;
}

.title-rick {
  display: block;
  font-size: 2rem;
  font-weight: 900;
  color: var(--green);
  text-shadow: 0 0 20px var(--green), 0 0 40px rgba(57, 255, 20, 0.3);
  letter-spacing: -0.02em;
}

.title-main {
  display: block;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--muted);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.splash-bubble {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 16px;
  text-align: center;
  font-style: italic;
  color: var(--muted);
  font-size: 0.9rem;
}

.name-section {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.name-label {
  font-size: 0.85rem;
  color: var(--muted);
  font-weight: 500;
}

.name-input {
  width: 100%;
  padding: 14px 16px;
  background: var(--panel);
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-size: 1rem;
  outline: none;
  transition: border-color 0.2s;
}

.name-input:focus {
  border-color: var(--green);
}

/* ============================================================
   Buttons
   ============================================================ */

.btn {
  padding: 14px 28px;
  border-radius: var(--radius-sm);
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  border: none;
  transition: transform 0.1s, opacity 0.2s;
  min-height: 52px;
  letter-spacing: 0.02em;
}

.btn:active {
  transform: scale(0.97);
}

.btn-primary {
  background: var(--green);
  color: #000;
  width: 100%;
  text-shadow: none;
}

.btn-primary:hover {
  opacity: 0.9;
}

.btn-secondary {
  background: var(--panel);
  color: var(--text);
  border: 2px solid var(--border);
  width: 100%;
}

.btn-secondary:hover {
  border-color: var(--green);
}

/* ============================================================
   Top Bar (Menu)
   ============================================================ */

.top-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.xp-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.level-info {
  display: flex;
  gap: 8px;
  align-items: baseline;
}

#menu-level {
  font-weight: 700;
  font-size: 0.85rem;
  color: var(--green);
}

#menu-level-name {
  font-size: 0.75rem;
  color: var(--muted);
}

.xp-bar {
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.xp-fill {
  height: 100%;
  background: var(--green);
  border-radius: 3px;
  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 0 8px rgba(57, 255, 20, 0.6);
}

.trophy-btn {
  background: none;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
  cursor: pointer;
  font-size: 1.1rem;
  transition: border-color 0.2s;
}

.trophy-btn:hover {
  border-color: var(--gold);
}

/* ============================================================
   Rick Avatar (CSS Art)
   ============================================================ */

.rick-avatar {
  width: 80px;
  height: 100px;
  position: relative;
  flex-shrink: 0;
}

/* Body / lab coat */
.rick-avatar::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 56px;
  height: 52px;
  background: #e8e8e8;
  border-radius: 8px 8px 4px 4px;
  border: 2px solid #ccc;
}

/* Head */
.rick-avatar::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 42px;
  height: 38px;
  background: #d4c5a0;
  border-radius: 50% 50% 48% 48%;
  border: 2px solid #b8a880;
  z-index: 1;
}

/* Hair — spiky white using box-shadow */
.rick-avatar .hair {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 44px;
  height: 22px;
  background: #f5f5f5;
  border-radius: 50% 50% 0 0;
  z-index: 2;
  /* Spiky hair via box-shadows */
  box-shadow:
    -18px -4px 0 4px #f5f5f5,
    -12px -8px 0 3px #f5f5f5,
    -6px -10px 0 2px #f5f5f5,
    0px -12px 0 2px #f5f5f5,
    6px -10px 0 2px #f5f5f5,
    12px -8px 0 3px #f5f5f5,
    18px -4px 0 4px #f5f5f5;
}

/* Eyes */
.rick-avatar .eyes {
  position: absolute;
  top: 36px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  display: flex;
  justify-content: space-between;
  z-index: 3;
}

.rick-avatar .eye {
  width: 8px;
  height: 8px;
  background: #2a2a2a;
  border-radius: 50%;
  position: relative;
}

.rick-avatar .eye::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 1px;
  width: 3px;
  height: 3px;
  background: white;
  border-radius: 50%;
}

/* Avatar animation states */
.rick-avatar.idle {
  animation: idle-breathe 3s ease-in-out infinite;
}

.rick-avatar.correct {
  animation: correct-bounce 0.6s ease-out forwards;
}

.rick-avatar.wrong {
  animation: wrong-shake 0.5s ease-out forwards;
}

/* ============================================================
   Keyframe Animations
   ============================================================ */

@keyframes idle-breathe {
  0%, 100% { transform: translateY(0px); }
  50%       { transform: translateY(-4px); }
}

@keyframes correct-bounce {
  0%   { transform: translateY(0px) scale(1); }
  30%  { transform: translateY(-12px) scale(1.05); }
  60%  { transform: translateY(-4px) scale(1); }
  80%  { transform: translateY(-8px) scale(1.02); }
  100% { transform: translateY(0px) scale(1); }
}

@keyframes wrong-shake {
  0%   { transform: translateX(0px); }
  15%  { transform: translateX(-8px); }
  30%  { transform: translateX(8px); }
  45%  { transform: translateX(-6px); }
  60%  { transform: translateX(6px); }
  75%  { transform: translateX(-3px); }
  90%  { transform: translateX(3px); }
  100% { transform: translateX(0px); }
}

@keyframes trophy-slide-up {
  0%   { transform: translateY(30px); opacity: 0; }
  100% { transform: translateY(0px);  opacity: 1; }
}

@keyframes green-flash {
  0%, 100% { box-shadow: inset 0 0 0 0 transparent; }
  50%       { box-shadow: inset 0 0 0 4px var(--green); }
}

@keyframes orange-flash {
  0%, 100% { box-shadow: inset 0 0 0 0 transparent; }
  50%       { box-shadow: inset 0 0 0 4px var(--orange); }
}

body.flash-correct {
  animation: green-flash 0.4s ease-out;
}

body.flash-wrong {
  animation: orange-flash 0.4s ease-out;
}

/* ============================================================
   Speech Bubble
   ============================================================ */

.speech-bubble {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 14px;
  position: relative;
  flex: 1;
  font-style: italic;
  font-size: 0.9rem;
  color: var(--text);
}

.speech-bubble::before {
  content: '';
  position: absolute;
  left: -10px;
  top: 14px;
  width: 0;
  height: 0;
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-right: 10px solid var(--border);
}

.speech-bubble::after {
  content: '';
  position: absolute;
  left: -8px;
  top: 14px;
  width: 0;
  height: 0;
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-right: 10px solid var(--panel);
}

/* ============================================================
   Menu — Rick Section
   ============================================================ */

.menu-rick-section {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

/* ============================================================
   Mode Cards
   ============================================================ */

.mode-grid {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 16px;
  flex: 1;
}

.mode-card {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px;
  background: var(--panel);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  text-align: left;
  transition: border-color 0.2s, background 0.2s;
  color: var(--text);
  width: 100%;
}

.mode-card:hover, .mode-card:focus {
  border-color: var(--green);
  background: var(--panel-light);
  outline: none;
}

.mode-card:active {
  transform: scale(0.99);
}

.mode-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.mode-name {
  font-weight: 700;
  font-size: 1rem;
  display: block;
}

.mode-desc {
  font-size: 0.8rem;
  color: var(--muted);
  display: block;
}

.mode-card.daily-glow {
  border-color: var(--gold);
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.15);
}

.mode-card.mode-boss {
  border-color: var(--orange);
}

.mode-card.mode-boss:hover {
  border-color: var(--orange);
  box-shadow: 0 0 12px rgba(255, 69, 0, 0.2);
}

/* ============================================================
   Quiz Top Bar
   ============================================================ */

.quiz-top-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.back-btn {
  background: none;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  padding: 6px 12px;
  cursor: pointer;
  font-size: 1rem;
  transition: border-color 0.2s;
  flex-shrink: 0;
}

.back-btn:hover {
  border-color: var(--green);
}

.mode-badge {
  font-size: 0.8rem;
  font-weight: 700;
  color: var(--green);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.quiz-meta {
  font-size: 0.8rem;
  color: var(--muted);
  margin-left: auto;
}

/* ============================================================
   Quiz Rick Section
   ============================================================ */

.quiz-rick-section {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

/* ============================================================
   Question Section
   ============================================================ */

.question-section {
  flex: 1;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
}

.question-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.q-number {
  font-size: 0.8rem;
  color: var(--muted);
  font-weight: 600;
  flex: 1;
}

.hint-btn {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--muted);
  padding: 4px 10px;
  cursor: pointer;
  font-size: 0.8rem;
  transition: border-color 0.2s, color 0.2s;
}

.hint-btn:hover {
  border-color: var(--gold);
  color: var(--gold);
}

.skip-btn {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--muted);
  padding: 4px 10px;
  cursor: pointer;
  font-size: 0.8rem;
  transition: border-color 0.2s;
}

.skip-btn:hover {
  border-color: var(--orange);
  color: var(--orange);
}

/* Sign display */
.sign-display {
  display: flex;
  justify-content: center;
  padding: 12px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.sign-display.hidden {
  display: none;
}

/* Question text */
.q-text {
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.5;
  color: var(--text);
}

/* Options grid */
.options-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.option-btn {
  display: flex;
  align-items: center;
  gap: 12px;
  min-height: 56px;
  padding: 12px 16px;
  background: var(--panel);
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-size: 0.95rem;
  cursor: pointer;
  text-align: left;
  width: 100%;
  transition: border-color 0.15s, background 0.15s;
  line-height: 1.4;
}

.option-btn:hover:not(:disabled) {
  border-color: var(--border-light);
  background: var(--panel-light);
}

.option-btn:disabled {
  cursor: default;
}

.option-letter {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.8rem;
  flex-shrink: 0;
  transition: background 0.15s;
}

.option-btn.correct {
  border-color: var(--green);
  background: var(--green-dim);
}

.option-btn.correct .option-letter {
  background: var(--green);
  color: #000;
}

.option-btn.wrong {
  border-color: var(--orange);
  background: var(--orange-dim);
}

.option-btn.wrong .option-letter {
  background: var(--orange);
  color: #fff;
}

/* ============================================================
   Timer Bar (Speed Blitz)
   ============================================================ */

.timer-bar {
  height: 4px;
  background: var(--border);
  flex-shrink: 0;
  overflow: hidden;
}

.timer-fill {
  height: 100%;
  background: var(--green);
  transition: width 1s linear, background 0.5s;
  box-shadow: 0 0 6px rgba(57, 255, 20, 0.5);
}

.timer-fill.urgent {
  background: var(--orange);
  box-shadow: 0 0 6px rgba(255, 69, 0, 0.5);
}

/* ============================================================
   Results Screen
   ============================================================ */

#screen-results {
  align-items: center;
  justify-content: center;
}

.results-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 32px 24px;
  width: 100%;
  max-width: 400px;
}

.results-title {
  font-size: 1.3rem;
  font-weight: 800;
}

.results-score {
  font-size: 3.5rem;
  font-weight: 900;
  color: var(--green);
  text-shadow: 0 0 20px rgba(57, 255, 20, 0.4);
  line-height: 1;
}

.results-stats {
  font-size: 0.9rem;
  color: var(--muted);
}

.results-xp {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--gold);
  background: var(--gold-dim);
  border: 1px solid rgba(255, 215, 0, 0.3);
  border-radius: var(--radius-sm);
  padding: 6px 16px;
}

.results-buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
}

/* ============================================================
   Trophies Screen
   ============================================================ */

.trophies-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.trophies-title {
  font-size: 1rem;
  font-weight: 700;
  color: var(--gold);
}

.trophy-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 16px;
}

.trophy-item {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px 12px;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.trophy-item.earned {
  border-color: var(--gold);
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.1);
}

.trophy-item.locked {
  opacity: 0.4;
  filter: grayscale(1);
}

.trophy-badge {
  font-size: 1.6rem;
}

.trophy-item-name {
  font-size: 0.75rem;
  font-weight: 700;
  line-height: 1.3;
  color: var(--text);
}

.trophy-item-xp {
  font-size: 0.7rem;
  color: var(--gold);
}

/* ============================================================
   Trophy Overlay
   ============================================================ */

.overlay-trophy {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  padding: 24px;
}

.overlay-trophy.hidden {
  display: none;
}

.trophy-card {
  background: var(--panel);
  border: 2px solid var(--gold);
  border-radius: var(--radius);
  padding: 32px 24px;
  text-align: center;
  max-width: 320px;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  animation: trophy-slide-up 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 0 40px rgba(255, 215, 0, 0.2);
}

.trophy-tier-badge {
  font-size: 3rem;
}

.trophy-name {
  font-size: 1.2rem;
  font-weight: 800;
  color: var(--gold);
}

.trophy-rick-line {
  font-style: italic;
  color: var(--muted);
  font-size: 0.9rem;
  line-height: 1.4;
}

.trophy-xp {
  font-size: 1rem;
  font-weight: 700;
  color: var(--gold);
}

.trophy-dismiss {
  font-size: 0.75rem;
  color: var(--muted);
  margin-top: 4px;
}

/* ============================================================
   Utility
   ============================================================ */

.hidden {
  display: none !important;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 2px;
}
